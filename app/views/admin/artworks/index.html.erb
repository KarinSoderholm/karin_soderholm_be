<section class="page-title">
  <h1>All the Artwork!</h1>
</section>

<div class="quicknav-content">
  <%= link_to  'admin dashboard', admin_dashboard_index_path %> / <%= link_to  'my garments', admin_clothings_path %> / <%= link_to  'my workshops', admin_classrooms_path %>
</div><br>

<h3>Total Number of Artpieces: <%= @artworks.count %></h3>
<h3>Number of Artpieces Sold: <%= @artworks.total_sold %></h3>
<h3>Number of Artpieces Available for purchase: <%= @artworks.total_available %></h3>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Link to Edit</th>
      <th>Link to Delete</th>
      <th>Description</th>
      <th>Image</th>
      <th>Create Date</th>
      <th>Sell Date</th>
      <th>Cost</th>
      <th>Availability</th>
      <th>Collection(s)</th>
    </tr>
  </thead>
  <tbody>
    <% if @artworks %>
      <% @artworks.each do |artwork| %>
      <tr>
        <td><%= link_to "#{artwork.name}", "/admin/artworks/#{artwork.id}", method: :get %></td>
        <td><%= link_to "Edit #{artwork.name}", "/admin/artworks/#{artwork.id}/edit", method: :get %></td>
        <td><%= link_to "Delete #{artwork.name}", "/admin/artworks/#{artwork.id}/alert", method: :get %></td>
        <td><%= artwork.description %></td>
        <% if artwork.image.attached? %>
          <td><%= image_tag(artwork.image) %></td>
        <% elsif artwork.photos.attached? %>
          <td><%= image_tag(artwork.photos.first) %>(<%= artwork.photos.count %>)</td>
        <% else %>
          <td>There is no image to display </td>
        <% end %>
        <td><%= artwork.create_date.strftime("%A, %d %b %Y") %></td>
        <% if !artwork.sell_date.nil?%>
          <td><%= artwork.sell_date.strftime("%A, %d %b %Y") %></td>
        <% else %>
          <td><%= artwork.sell_date %></td>
        <% end %>
        <td><%= number_to_currency(artwork.cost) %></td>
        <td><%= artwork.availability? %></td>
        <% artwork.collections.each do |collection| %>
          <td><%= collection.name %></td>
        <% end %>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<section class="new-artwork-button">
  <p><%= button_to 'Add a New Artwork', new_admin_artwork_path, method: :get  %></p>
</section>

<section class="new-collection-button">
  <p><%= button_to 'Add a New Collection',  new_admin_collection_path, method: :get  %></p>
</section>

<div class="import-csv">
  <%# <%= form_tag import_admin_artworks_path, multipart: true do %>
    <%# <%= file_field_tag :file %>
    <%# <%= submit_tag 'Import Spreadsheet' %>
  <%# <% end %>
</div>
